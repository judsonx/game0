<!doctype HTML>
<html>
<head>
  <title>Game0</title>
  <link rel="stylesheet" type="text/css" href="assets/style/site.css">
</head>
<body>
<header>
    <h1>game0</h1>
</header>
<div class="content">
  <div>
    <p id="score">Score: 0</p>
    <p>Status: <span id="status">Not Started</span></p>
    <input type="button" id="reset" value="Start" />
  </div>
  <div id="play_area">
    <div id="group">
      <div id="pa"></div>
      <div id="ga"></div>
      <div id="ca">
        <table>
          <tr>
            <td colspan="2" id="toggle">Rotate</td>
          </tr>
          <tr>
            <td id="left">Left</td>
            <td id="right">Right</td>
          </tr>
          <tr>
            <td colspan="2" id="down">Down</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js">
</script>
<script src="assets/js/game0.js"></script>
<script>
game0.init ({
  game_area: $('#ga'),
  preview_area: $('#pa'),
  score: $('#score')
});

$('#left').on ('click', function () { game0.on_ctrl_left (); });
$('#right').on ('click', function () { game0.on_ctrl_right (); });
$('#toggle').on ('click', function () { game0.on_ctrl_toggle (); });
$('#down').on ('click', function () { game0.on_ctrl_down (); });

$(document).on ('keydown', function (e) {
  switch (e.keyCode)
  {
  case 38:
    game0.on_ctrl_toggle ();
    return false;
  case 40:
    game0.on_ctrl_down ();
    return false;
  case 37:
    game0.on_ctrl_left ();
    return false;
  case 39:
    game0.on_ctrl_right ();
    return false;
  }
});

var timer0;

function step ()
{
  if (!game0.step ())
  {
    window.clearInterval (timer0);
    $('#status').text ('Game Over!');
  }
}

$('#reset').on ('click', function () {
  $('#status').text ('In-Progress');
  $('#reset').prop ('value', 'Re-Start');
  window.clearInterval (timer0);
  game0.reset ();
  timer0 = window.setInterval (step, 1000);
});

</script>
</body>
</html>
